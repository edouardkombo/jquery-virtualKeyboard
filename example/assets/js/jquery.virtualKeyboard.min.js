/*
 * jquery virtual keyboard
 * Version 0.1 (@edouardkombo / breezeframework.com)
 * https://github.com/edouardkombo/jquery-virtualKeyboard
 *
 * Initialize a timer that starts by clicking on an element of the page.
 * If a click has been detected before the end of the timer, timer is increased.
 * Timer is resetted if no click has been detected before its end.
 *
 * Copyright (c) 2014 Edouard Kombo (@edouardkombo / breezeframework.com)
 * Dual licensed under the MIT and GPL licenses.
*/

(function(e){e.fn.virtualKeyboard=function(t){var n={keyboard:"azerty",id:"thisId",isDraggable:true,onFocus:true,nextField:false};if(t){e.extend(n,t)}this.each(function(){function c(){u=document.createElement("div");u.setAttribute("id",n.id);a=document.getElementById(t[0].id);a.parentNode.insertBefore(u,a);n.keyboard==="azerty"?e("#"+n.id).html(r):e("#"+n.id).html(o)}if(n.keyboard!=="azerty"&&n.keyboard!=="qwerty"){console.log("Unrecognized virtual keyboard type!")}var t=e(this),r,i=n.id+"_ul",s,o,u,a,f=false,l=false;r="<ul id='"+i+"'>"+"<li class='symbol'><span class='off'>`</span><span class='on'>~</span></li>"+"<li class='symbol'><span class='off'>1</span><span class='on'>!</span></li>"+"<li class='symbol'><span class='off'>2</span><span class='on'>@</span></li>"+"<li class='symbol'><span class='off'>3</span><span class='on'>#</span></li>"+"<li class='symbol'><span class='off'>4</span><span class='on'>$</span></li>"+"<li class='symbol'><span class='off'>5</span><span class='on'>%</span></li>"+"<li class='symbol'><span class='off'>6</span><span class='on'>^</span></li>"+"<li class='symbol'><span class='off'>7</span><span class='on'>&</span></li>"+"<li class='symbol'><span class='off'>8</span><span class='on'>*</span></li>"+"<li class='symbol'><span class='off'>9</span><span class='on'>(</span></li>"+"<li class='symbol'><span class='off'>0</span><span class='on'>)</span></li>"+"<li class='symbol'><span class='off'>-</span><span class='on'>_</span></li>"+"<li class='symbol'><span class='off'>=</span><span class='on'>+</span></li>"+"<li class='delete lastitem'>retour</li>"+"<li class='tab'>tab</li>"+"<li class='letter'>a</li>"+"<li class='letter'>z</li>"+"<li class='letter'>e</li>"+"<li class='letter'>r</li>"+"<li class='letter'>t</li>"+"<li class='letter'>y</li>"+"<li class='letter'>u</li>"+"<li class='letter'>i</li>"+"<li class='letter'>o</li>"+"<li class='letter'>p</li>"+"<li class='symbol'><span class='off'>[</span><span class='on'>{</span></li>"+"<li class='symbol'><span class='off'>]</span><span class='on'>}</span></li>"+"<li class='symbol lastitem'><span class='off'>\\</span><span class='on'>|</span></li>"+"<li class='capslock'>verr</li>"+"<li class='letter'>q</li>"+"<li class='letter'>s</li>"+"<li class='letter'>d</li>"+"<li class='letter'>f</li>"+"<li class='letter'>g</li>"+"<li class='letter'>h</li>"+"<li class='letter'>j</li>"+"<li class='letter'>k</li>"+"<li class='letter'>l</li>"+"<li class='letter'>m</li>"+"<li class='symbol'><span class='off'>;</span><span class='on'>:</span></li>"+"<li class='symbol'><span class='off'>'</span><span class='on'>&quot;</span></li>"+"<li class='return lastitem'>entr√©e</li>"+"<li class='left-shift'>shift</li>"+"<li class='letter'>w</li>"+"<li class='letter'>x</li>"+"<li class='letter'>c</li>"+"<li class='letter'>v</li>"+"<li class='letter'>b</li>"+"<li class='letter'>n</li>"+"<li class='symbol'><span class='off'>,</span><span class='on'>&lt;</span></li>"+"<li class='symbol'><span class='off'>.</span><span class='on'>&gt;</span></li>"+"<li class='symbol'><span class='off'>/</span><span class='on'>?</span></li>"+"<li class='right-shift lastitem'>maj</li>"+"<li class='space lastitem'>&nbsp;&nbsp;</li>"+"</ul>";o="<ul id='"+i+"'>"+"<li class='symbol'><span class='off'>`</span><span class='on'>~</span></li>"+"<li class='symbol'><span class='off'>1</span><span class='on'>!</span></li>"+"<li class='symbol'><span class='off'>2</span><span class='on'>@</span></li>"+"<li class='symbol'><span class='off'>3</span><span class='on'>#</span></li>"+"<li class='symbol'><span class='off'>4</span><span class='on'>$</span></li>"+"<li class='symbol'><span class='off'>5</span><span class='on'>%</span></li>"+"<li class='symbol'><span class='off'>6</span><span class='on'>^</span></li>"+"<li class='symbol'><span class='off'>7</span><span class='on'>&</span></li>"+"<li class='symbol'><span class='off'>8</span><span class='on'>*</span></li>"+"<li class='symbol'><span class='off'>9</span><span class='on'>(</span></li>"+"<li class='symbol'><span class='off'>0</span><span class='on'>)</span></li>"+"<li class='symbol'><span class='off'>-</span><span class='on'>_</span></li>"+"<li class='symbol'><span class='off'>=</span><span class='on'>+</span></li>"+"<li class='delete lastitem'>delete</li>"+"<li class='tab'>tab</li>"+"<li class='letter'>q</li>"+"<li class='letter'>w</li>"+"<li class='letter'>e</li>"+"<li class='letter'>r</li>"+"<li class='letter'>t</li>"+"<li class='letter'>y</li>"+"<li class='letter'>u</li>"+"<li class='letter'>i</li>"+"<li class='letter'>o</li>"+"<li class='letter'>p</li>"+"<li class='symbol'><span class='off'>[</span><span class='on'>{</span></li>"+"<li class='symbol'><span class='off'>]</span><span class='on'>}</span></li>"+"<li class='symbol lastitem'><span class='off'>\\</span><span class='on'>|</span></li>"+"<li class='capslock'>caps lock</li>"+"<li class='letter'>a</li>"+"<li class='letter'>s</li>"+"<li class='letter'>d</li>"+"<li class='letter'>f</li>"+"<li class='letter'>g</li>"+"<li class='letter'>h</li>"+"<li class='letter'>j</li>"+"<li class='letter'>k</li>"+"<li class='letter'>l</li>"+"<li class='symbol'><span class='off'>;</span><span class='on'>:</span></li>"+"<li class='symbol'><span class='off'>'</span><span class='on'>&quot;</span></li>"+"<li class='return lastitem'>return</li>"+"<li class='left-shift'>shift</li>"+"<li class='letter'>z</li>"+"<li class='letter'>x</li>"+"<li class='letter'>c</li>"+"<li class='letter'>v</li>"+"<li class='letter'>b</li>"+"<li class='letter'>n</li>"+"<li class='letter'>m</li>"+"<li class='symbol'><span class='off'>,</span><span class='on'>&lt;</span></li>"+"<li class='symbol'><span class='off'>.</span><span class='on'>&gt;</span></li>"+"<li class='symbol'><span class='off'>/</span><span class='on'>?</span></li>"+"<li class='right-shift lastitem'>shift</li>"+"<li class='space lastitem'>&nbsp;</li>"+"</ul>";c();if(n.isDraggable){e("#"+n.id).draggable()}if(n.onFocus){e("#"+n.id).hide();e(t).focus(function(){e("#"+n.id).show()})}else{e("#"+n.id).show()}e(t).blur(function(){e("#"+n.id).hide()});e("#"+i+" li").click(function(){var r=e(this);s=r.html();if(r.hasClass("left-shift")||r.hasClass("right-shift")){e(".letter").toggleClass("uppercase");e(".symbol span").toggle();f=f===true?false:true;l=false;return false}if(r.hasClass("capslock")){e(".letter").toggleClass("uppercase");l=true;return false}if(r.hasClass("delete")){var i=e(t).val();e(t).val(i.substr(0,i.length-1));return false}if(r.hasClass("symbol"))s=e("span:visible",r).html();if(r.hasClass("space"))s=" ";if(r.hasClass("tab"))s="	";if(r.hasClass("return"))s="\n";if(r.hasClass("uppercase"))s=s.toUpperCase();if(r.hasClass("tab")){if(n.nextField){e(t).blur();e(n.nextField).focus()}}if(f===true){e(".symbol span").toggle();if(l===false)e(".letter").toggleClass("uppercase");f=false}e(t).val(e(t).val()+s)})});return this}})(jQuery)